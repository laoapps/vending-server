<ion-content class="ion-padding">

  <ion-card>
    <ion-card-header>
      <ion-card-title class="ion-text-center">Welcome to Tasmota Control</ion-card-title>
    </ion-card-header>

    <ion-card-content>

      <!-- Token Input -->
      <ion-item *ngIf="!role">
        <ion-label position="floating">Enter Token</ion-label>
        <ion-input [(ngModel)]="token" type="text"></ion-input>
      </ion-item>

      <ion-button *ngIf="!role" expand="block" class="ion-margin-top" (click)="loadRole()">
        âœ… Validate Token
      </ion-button>

      <ion-button *ngIf="role && role !== 'owner'" expand="block" color="secondary" class="ion-margin-top" (click)="registerOwner()">
        ğŸ“ Register as Owner
      </ion-button>

      <!-- Admin Section -->
      <ion-list *ngIf="role === 'admin'" class="ion-margin-top">
        <ion-list-header>
          <ion-label color="primary"><strong>Admin Menu</strong></ion-label>
        </ion-list-header>

        <ion-item button (click)="navigateTo('/admin-dashboard')">
          <ion-label>ğŸ“Ÿ View All Devices</ion-label>
        </ion-item>

        <ion-item button (click)="navigateTo('/admin-reports')">
          <ion-label>ğŸ“Š View Reports</ion-label>
        </ion-item>

        <ion-item button (click)="navigateTo('/admin-unregistered-devices')">
          <ion-label>âš™ï¸ Manage Unregistered Devices</ion-label>
        </ion-item>
      </ion-list>

      <!-- Owner Section -->
      <ion-list *ngIf="role === 'owner'" class="ion-margin-top">
        <ion-list-header>
          <ion-label color="tertiary"><strong>Owner Menu</strong></ion-label>
        </ion-list-header>

        <ion-item button (click)="tomodal('owner')">
          <ion-label>ğŸ”Œ Manage Devices</ion-label>
        </ion-item>

        <ion-item button (click)="navigateTo('/owner-reports')">
          <ion-label>ğŸ“ˆ View Reports</ion-label>
        </ion-item>
      </ion-list>

      <!-- User Section -->
      <ion-list *ngIf="role === 'user'" class="ion-margin-top">
        <ion-list-header>
          <ion-label color="success"><strong>User Menu</strong></ion-label>
        </ion-list-header>

        <ion-item button (click)="tomodal('user')">
          <ion-label>ğŸ“‹ List Devices</ion-label>
        </ion-item>

        <ion-item button (click)="navigateTo('/user-schedules')">
          <ion-label>ğŸ•’ Subscribe to Schedules</ion-label>
        </ion-item>
      </ion-list>

    </ion-card-content>
  </ion-card>

</ion-content>
