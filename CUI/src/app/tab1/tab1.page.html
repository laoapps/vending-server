<ion-header>

  <!-- <ion-toolbar mode="ios" > -->
  <!-- <ion-title style="height: 160px; "> -->
  <div class="box">
    <div>
      <img [src]="mmLogo" (press)="holdCount()" (touchend)="endCount()" (click)="manageStock()" />
    </div>
    <div>
      <ion-button (click)="showBills()">Bills</ion-button>
    </div>
    <!-- <img src="assets/icon/favicon.png"/> -->
   
  </div>

  <div class="menu-options">

    <div class="left">
      <div class="cash-balance">{{ apiService.cash | number }}</div>
      <div class="item-group">
        <a (click)="cashin()" href="javascript:void(0)" class="item">

          <div class="icon">
            <i class="fa-solid fa-arrow-up-from-bracket"></i>
          </div>
          <div class="text">Cash In</div>
        </a>
        <a href="javascript:void(0)" class="item">

          <div class="icon">
            <i class="fa-solid fa-arrow-up-from-bracket"></i>
          </div>
          <div class="text">LAAB Cash In</div>
        </a>
      </div>


    </div>
    <div class="right">
      <a href="javascript:void(0)" class="item">
        <div class="icon">
          <i class="fa-solid fa-wallet"></i>
        </div>
        <div class="text">LAAB Cash Out</div>
      </a>
      <a (click)="epinCashOut()"  href="javascript:void(0)" class="item">
        <div class="icon">
          <i class="fa-solid fa-qrcode"></i>
        </div>
        <div class="text">EPIN Cash Out</div>
      </a>

      
    </div>

  </div>

  <!-- </ion-title> -->

  <!-- </ion-toolbar> -->
</ion-header>

<ion-content [fullscreen]="true">
  <div class="floatingBtn"><ion-icon name="logo-whatsapp"></ion-icon><div>ມີບັນຫາໂທWA:<div>{{apiService.contact}}</div></div></div>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div *ngFor="let sl of saleList; index as i" style="display:inline-block">
    <div *ngIf="sl.stock.qtty-checkCartCount(sl.position)>0" style="float:left">
      <ion-item-divider class="item-header">
        <ion-label>
          <ion-badge style="font-size: 20px;">
            {{sl.position+compensation}}#.
          </ion-badge> {{sl.machineId}}
        </ion-label>
      </ion-item-divider>
      <ion-card>
        <ion-item>
          <label>{{sl.stock.name}}</label>
        </ion-item>
        <ion-item >
          <div *ngIf="sl.stock.price==0;else elsebuystock">
            <img style="width: 200px;height:480px" [src]="sl.stock.image.includes(';base64,')?sl.stock.image:this.url+'/public/'+sl.stock.image" (click)="buyMMoney(sl)">
          </div>
          <ng-template #elsebuystock>
            <img style="width: 200px;height:480px" [src]="sl.stock.image.includes(';base64,')?sl.stock.image:this.url+'/public/'+sl.stock.image" (click)="addOrder(sl)">

          </ng-template>
        </ion-item>
        <ion-item>
          <div *ngIf="sl.stock.price==0;else elsestock">
            <!-- <img src="assets/icon/free.png" style="width:18px;height:18px">
             -->
             <ion-label color="danger">FREE/<ion-icon name="cube-sharp" color="danger">
            </ion-icon>: {{sl.stock.qtty}}</ion-label>
          </div>
          <ng-template #elsestock>
            <label>
              <ion-icon name="pricetags-sharp" color="danger"></ion-icon>: {{sl.stock.price}} / <ion-icon
                name="cube-sharp" color="danger"></ion-icon>: {{sl.stock.qtty}}
            </label>
          </ng-template>

        </ion-item>
      </ion-card>
    </div>
  
  </div>

  <div>
    <img src="../../assets/background/soda.jpg">
  </div>



  <!-- <notifier-container></notifier-container> -->
  <div *ngIf="getTotalSale?.t">
    <div class="spacious-container" class="glasspanel">
      <ion-grid>
        <ion-row>
          <ion-col>
            <div class="button-wrapper" style="float: right;" (click)="laabGo()">

              <div class="background-button xbutton" href="#" title="LAAB GO"></div>
            </div>
            <div class="button-wrapper" style="float: right;" (click)="buyManyMMoney()">

              <div class="background-button xbutton" href="#" title="GO"></div>
            </div>
            <div style="float: right;">
              <ion-icon name="cart-sharp" color="primary" style="font-size: 30px;"></ion-icon>
              :{{getTotalSale?.q|number}}:
              <ion-icon name="wallet-sharp" color="primary" style="font-size: 30px;"></ion-icon>
              :{{getTotalSale?.t|number}}

            </div>


          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>

            <div class="scrollmenu">
              <div class="order-item" *ngFor="let o of summarizeOrder; let i=index;" color="primary">
                <ion-icon name="trash-bin-sharp" color="danger" (click)="removeCart(i)"></ion-icon> <img
                  [src]="o.stock.image.includes(';base64,')?o.stock.image:this.url+'/public/'+o.stock.image" style="width:50px;height:120px; margin:0px">
                <div>
                  <div>{{o.stock.name}}</div><div>{{o.stock.qtty|number}}({{(o.stock.qtty*o.stock.price)|number}})</div>
                </div>

              </div>
            </div>


          </ion-col>
        </ion-row>
      </ion-grid>



    </div>
  </div>

</ion-content>